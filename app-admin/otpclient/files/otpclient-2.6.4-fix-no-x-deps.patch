diff --git a/CMakeLists.txt b/CMakeLists.txt
index b018c27..3021aec 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -42,16 +42,18 @@ find_package(Protobuf 3.6.0 REQUIRED)
 find_package(Gcrypt 1.6.0 REQUIRED)
 pkg_check_modules(COTP REQUIRED cotp>=1.2.1)
 pkg_check_modules(BASEENCODE REQUIRED baseencode>=1.0.12)
-pkg_check_modules(PNG REQUIRED libpng>=1.2.0)
 pkg_check_modules(LIBZIP REQUIRED libzip>=1.0.0)
 pkg_check_modules(JANSSON REQUIRED jansson>=2.10.0)
-pkg_check_modules(ZBAR REQUIRED zbar>=0.20)
 pkg_check_modules(GTK3 REQUIRED gtk+-3.0>=3.20.0)
 pkg_check_modules(GLIB2 REQUIRED glib-2.0>=2.64.0)
 pkg_check_modules(GIO REQUIRED gio-2.0>=2.64.0)
 pkg_check_modules(UUID REQUIRED uuid>=2.34.0)
 pkg_check_modules(PROTOC REQUIRED libprotobuf-c>=1.3.0)
 pkg_check_modules(LIBSECRET REQUIRED libsecret-1>=0.20.0)
+if(BUILD_GUI)
+	pkg_check_modules(PNG REQUIRED libpng>=1.2.0)
+	pkg_check_modules(ZBAR REQUIRED zbar>=0.20)
+endif()
 
 set(GUI_HEADER_FILES
         src/common/common.h
