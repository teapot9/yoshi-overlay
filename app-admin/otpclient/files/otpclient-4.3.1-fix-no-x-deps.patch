diff --git a/CMakeLists.txt b/CMakeLists.txt
index b9f1bd5..d273078 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -57,19 +57,21 @@ if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
 endif()
 
 find_package(PkgConfig REQUIRED)
-find_package(Protobuf 3.6.0 REQUIRED)
 pkg_check_modules(GCRYPT REQUIRED IMPORTED_TARGET libgcrypt>=1.10.1)
 pkg_check_modules(COTP REQUIRED IMPORTED_TARGET cotp>=3.0.0)
-pkg_check_modules(PNG REQUIRED IMPORTED_TARGET libpng>=1.6.30)
 pkg_check_modules(JANSSON REQUIRED IMPORTED_TARGET jansson>=2.12)
-pkg_check_modules(ZBAR REQUIRED IMPORTED_TARGET zbar>=0.20)
-pkg_check_modules(GTK3 REQUIRED IMPORTED_TARGET gtk+-3.0>=3.24.0)
 pkg_check_modules(GLIB2 REQUIRED IMPORTED_TARGET glib-2.0>=2.68.0)
 pkg_check_modules(GIO REQUIRED IMPORTED_TARGET gio-2.0>=2.68.0)
 pkg_check_modules(UUID REQUIRED IMPORTED_TARGET uuid>=2.34.0)
-pkg_check_modules(PROTOC REQUIRED IMPORTED_TARGET libprotobuf-c>=1.3.0)
 pkg_check_modules(LIBSECRET REQUIRED IMPORTED_TARGET libsecret-1>=0.20.0)
-pkg_check_modules(LIBQRENCODE REQUIRED IMPORTED_TARGET libqrencode>=4.0.2)
+if(BUILD_GUI)
+    find_package(Protobuf 3.6.0 REQUIRED)
+    pkg_check_modules(PNG REQUIRED IMPORTED_TARGET libpng>=1.6.30)
+    pkg_check_modules(ZBAR REQUIRED IMPORTED_TARGET zbar>=0.20)
+    pkg_check_modules(GTK3 REQUIRED IMPORTED_TARGET gtk+-3.0>=3.24.0)
+    pkg_check_modules(PROTOC REQUIRED IMPORTED_TARGET libprotobuf-c>=1.3.0)
+    pkg_check_modules(LIBQRENCODE REQUIRED IMPORTED_TARGET libqrencode>=4.0.2)
+endif()
 if(ENABLE_MINIMIZE_TO_TRAY)
     pkg_check_modules(APPINDICATOR REQUIRED IMPORTED_TARGET ayatana-appindicator3-0.1)
 endif()
